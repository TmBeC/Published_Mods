Version 1
SubGoalCombiner SGC_AND
INITSECTION
//REGION Tag registration

DB_LanguageTags((TAG)LANGUAGES_DRACONIC_2b95ee1a-0d44-4d9f-8bb0-cb87ea0934b6, (TAG)DRAGON_95748ad1-cda2-4c0c-a9b2-875899327693);
DB_LanguageTags((TAG)LANGUAGES_DRACONIC_2b95ee1a-0d44-4d9f-8bb0-cb87ea0934b6, (TAG)KOBOLD_f68151f2-58ee-42e6-98ad-7d858c4a0f13);
DB_LanguageTags((TAG)LANGUAGES_DRACONIC_2b95ee1a-0d44-4d9f-8bb0-cb87ea0934b6, (TAG)DRAGONBORN_02e5e9ed-b6b2-4524-99cd-cb2bc84c754a);
DB_LanguageTags((TAG)LANGUAGES_DWARVISH_6fe55c94-9799-4d8a-9853-baeee21de471, (TAG)DWARF_486a2562-31ae-437b-bf63-30393e18cbdd);
DB_LanguageTags((TAG)LANGUAGES_ELVISH_0b263829-9fb8-46e0-810f-4f8c4abd8105, (TAG)ELF_351f4e42-1217-4c06-b47a-443dcf69b111);
DB_LanguageTags((TAG)LANGUAGES_ELVISH_0b263829-9fb8-46e0-810f-4f8c4abd8105, (TAG)DROWELF_a672ac1d-d088-451a-9537-3da4bf74466c);
DB_LanguageTags((TAG)LANGUAGES_ELVISH_0b263829-9fb8-46e0-810f-4f8c4abd8105, (TAG)HALFELF_34317158-8e6e-45a2-bd1e-6604d82fdda2);
DB_LanguageTags((TAG)LANGUAGES_GIANT_704f25aa-2848-4998-8b1d-682120103c1a, (TAG)OGRE_cb53ec1e-af17-4dc2-bb28-2ac56d7eba96);
DB_LanguageTags((TAG)LANGUAGES_GIANT_704f25aa-2848-4998-8b1d-682120103c1a, (TAG)GIANT_375bd683-249f-488e-8ada-4ea49df5540d);
DB_LanguageTags((TAG)LANGUAGES_GNOMISH_a0918c07-b9b2-4982-aec4-15267e2ba317, (TAG)GNOME_1f0551f3-d769-47a9-b02b-5d3a8c51978c);
DB_LanguageTags((TAG)LANGUAGES_GOBLIN_afa07aae-043f-44b0-b611-1a2aff46e3ef, (TAG)GOBLIN_608597d9-bf00-4ede-aabe-767457280925);
DB_LanguageTags((TAG)LANGUAGES_GOBLIN_afa07aae-043f-44b0-b611-1a2aff46e3ef, (TAG)HOBGOBLIN_193938c4-ed1c-4648-af3f-f4b59152ec92);
DB_LanguageTags((TAG)LANGUAGES_GOBLIN_afa07aae-043f-44b0-b611-1a2aff46e3ef, (TAG)BUGBEAR_dc18a33a-bdd1-41be-8ad5-e6fca917b54e);
DB_LanguageTags((TAG)LANGUAGES_HALFLING_885fef6e-c3ff-49ca-945c-8787d3d56edd, (TAG)HALFLING_b99b6a5d-8445-44e4-ac58-81b2ee88aab1);
DB_LanguageTags((TAG)LANGUAGES_ORC_2e0ad571-7d84-4c1c-bc6d-3842855e1535, (TAG)HALFORC_3311a9a9-cdbc-4b05-9bf6-e02ba1fc72a3);
DB_LanguageTags((TAG)LANGUAGES_ABYSSAL_f6e88507-97e3-49e7-b2ed-15bb205e336f, (TAG)DEMON_9a187721-0588-4f3c-ba9c-bff4989001b9);
DB_LanguageTags((TAG)LANGUAGES_CELESTIAL_3cb31e1c-4f02-4c36-b100-08f7842e51aa, (TAG)CELESTIAL_7cba0bd7-b955-4ac9-95ba-79e75978d9ac);
DB_LanguageTags((TAG)LANGUAGES_DEEPSPEECH_d1e52e63-527a-4230-a7f3-825295a96c55, (TAG)MINDFLAYER_8ee4d870-3f6b-466c-968f-ab0ba2be6229);
DB_LanguageTags((TAG)LANGUAGES_DEEPSPEECH_d1e52e63-527a-4230-a7f3-825295a96c55, (TAG)INTELLECT_DEVOURER_69901347-23cb-4f60-abf3-527f23cdf0db);
DB_LanguageTags((TAG)LANGUAGES_INFERNAL_f6523a5a-4c5b-4f9f-a2b7-97c1019e74a4, (TAG)DEVIL_6abb4b64-51a7-4d63-9359-66f0047a6fe2);
DB_LanguageTags((TAG)LANGUAGES_INFERNAL_f6523a5a-4c5b-4f9f-a2b7-97c1019e74a4, (TAG)CAMBION_79563753-c1e4-4f3a-93a7-4aad1f3ab46e);
DB_LanguageTags((TAG)LANGUAGES_INFERNAL_f6523a5a-4c5b-4f9f-a2b7-97c1019e74a4, (TAG)FIEND_44be2f5b-f27e-4665-86f1-49c5bfac54ab);
DB_LanguageTags((TAG)LANGUAGES_INFERNAL_f6523a5a-4c5b-4f9f-a2b7-97c1019e74a4, (TAG)TIEFLING_aaef5d43-c6f3-434d-b11e-c763290dbe0c);
DB_LanguageTags((TAG)LANGUAGES_PRIMORDIAL_c2010e37-fcc4-4665-80e9-0e4c919b4541, (TAG)ELEMENTAL_196351e2-ff25-4e2b-8560-222ac6b94a54);
DB_LanguageTags((TAG)LANGUAGES_PRIMORDIAL_c2010e37-fcc4-4665-80e9-0e4c919b4541, (TAG)DJINNI_bf11285b-996d-4779-9273-d91e6d38860e);
DB_LanguageTags((TAG)LANGUAGES_SYLVAN_540c4b5a-5250-4ced-9318-070074f20b91, (TAG)FEY_8cac055c-82dd-435c-9496-cf4c4b4581ab);
DB_LanguageTags((TAG)LANGUAGES_UNDERCOMMON_b5879aab-bebf-41c0-9780-fabd5e0f5b40, (TAG)UNDERDARK_60f6b464-752f-4970-a855-f729565b5e07);
DB_LanguageTags((TAG)LANGUAGES_UNDERCOMMON_b5879aab-bebf-41c0-9780-fabd5e0f5b40, (TAG)DROWELF_a672ac1d-d088-451a-9537-3da4bf74466c);
DB_LanguageTags((TAG)LANGUAGES_UNDERCOMMON_b5879aab-bebf-41c0-9780-fabd5e0f5b40, (TAG)DEEPGNOME_2bbc3217-3d8c-46e6-b599-a0f1c9063f9a);
DB_LanguageTags((TAG)LANGUAGES_UNDERCOMMON_b5879aab-bebf-41c0-9780-fabd5e0f5b40, (TAG)DUERGARDWARF_78adf3cd-4741-47a8-94f6-f3d322432591);

//END_REGION


//REGION Dialog influencing status

DB_LanguageStatus("LANGUAGE_FLUENCY");
DB_LanguageStatus("COMPREHEND_LANGUAGES_BONUS");

//END_REGION

KBSECTION
//REGION Check tags on player and NPC for a match on dialog start and apply the bonuses

IF
DialogStarted(_, _)
AND
DB_LanguageTags(_LanguageTag, _RaceTag)
AND
DB_Players(_Player)
AND
IsTagged(_Player, _LanguageTag, 1)
AND
DB_DialogNPCs(_, _Target, _)
AND
IsTagged(_Target, _RaceTag, 1)
THEN
ApplyStatus(_Target, "LANGUAGE_FLUENCY", -1.0, 1, _Player);

IF
DialogStarted(_, _)
AND
DB_Players(_Player)
AND
IsTagged(_Player, (TAG)COMPREHEND_LANGUAGES_1d6e36a6-d757-449b-8040-2af3f1a99c3a, 1)
AND
DB_DialogNPCs(_, _Target, _)
THEN
ApplyStatus(_Target, "COMPREHEND_LANGUAGES_BONUS", -1.0, 1, _Player);

//END_REGION


//REGION Remove status at the end of dialog

IF
DialogEnded(_, _)
AND
DB_LanguageStatus(_Status)
AND
DB_DialogNPCs(_, _Target, _)
AND
HasAppliedStatus(_Target, _Status, 1)
THEN
RemoveStatus(_Target, _Status);

//END_REGION

EXITSECTION

ENDEXITSECTION
